<html>
<style>
    #result li {
        border-bottom: 1px solid #ddd;
        padding: 12px;
        list-style-type: square;
    }

    #result li a {
        color: #333;
        text-decoration: none;
    }
</style>

<body>
    <div>
        <label for="search">ê²€ìƒ‰ì–´</label><input type="text" id="search" value="ë‰´ìŠ¤" />
        <button onclick="test()">ê²€ìƒ‰</button>
    </div>
    <ul id="result">
        <!--ì´ ê³³ì— ë‚´ìš©ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³´ì—¬ì¤€ë‹¤.-->
    </ul>

    <script>
        //ğŸ’›api dataë¶ˆëŸ¬ì˜¤ê¸°.
        async function postData(url = '', data = {}) {
            const response = await fetch(url, {
                method: 'GET', // *GET, POST, PUT, DELETE ë“±
                headers: { 'Authorization': 'KakaoAK ab44543239760acabf8e5a55b74860d5', },
            });
            return data = await response.json(); // JSON ì‘ë‹µì„ ë„¤ì´í‹°ë¸Œ JavaScript ê°ì²´ë¡œ íŒŒì‹±
        }

        postData('https://dapi.kakao.com/v2/search/vclip?query=ë‚ ì”¨', { answer: 42 }).then((data) => {
            console.log(data); // JSON ë°ì´í„°ê°€ `data.json()` í˜¸ì¶œì— ì˜í•´ íŒŒì‹±ë¨
            news = data.documents;
            console.log(news);

            render(news);
        });



        const getNewsByKeyword = async () => { //í™”ì‚´í‘œ í•¨ìˆ˜ ì •ì˜
            //1.ê²€ìƒ‰ í‚¤ì›Œë“œ ì½ì–´ì˜¤ê¸°
            //2. urlì— ê²€ìƒ‰ í‚¤ì›Œë“œ ë¶™ì´ê¸°
            //3. í—¤ë”ì¤€ë¹„
            //4. url ë¶€ë¥´ê¸°
            //5. ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            //6. ë°ì´í„° ë³´ì—¬ì£¼ê¸°

            let keyword = document.getElementById("search-input").value;
            let url = new URL(`https://dapi.kakao.com/v2/search/web?query=${keyword}&size=5`);
            let header = new Headers({ 'Authorization': 'KakaoAK ab44543239760acabf8e5a55b74860d5' });
            let response = await fetch(url, { headers: header })
            let data = await response.json();
            news = data.documents;
            console.log(news);
            render();
        }

        const render = () => {
            let newsHTML = news.map((item) => {
                return `<div class="row">
                    <div class="col-lg-4">
                        <img class="news-img-size" src="https://image.aladin.co.kr/product/28966/11/letslook/K292836721_b.jpg" alt="">
                    </div>
                    <div class="col-lg-8">
                        <h5> ${item.title} </h5>
                        <p>${item.contents}</p>
                        <div>${item.datetime} <a href="${item.url}">ìƒì„¸ ë‰´ìŠ¤ë³´ê¸°</a></div>
                    </div>
                </div>`;
            }).join('');

            document.getElementById("news-board").innerHTML = newsHTML;
        }

        searchButton.addEventListener("click", getNewsByKeyword); //ìœ„ì¹˜. í™”ì‚´í‘œí•¨ìˆ˜ í˜¸ì´ìŠ¤íŒ…x í•¨ìˆ˜ ì •ì˜ë˜ê¸° ì „ì— ì“¸ ìˆ˜ ì—†ë‹¤.
        getLatestNews();

    </script>
</body>

</html>